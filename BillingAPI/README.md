# pnap_billing_api

BillingAPI - the Ruby gem for the Billing API

Automate your infrastructure billing with the Bare Metal Cloud Billing API. Reserve your server instances to
ensure guaranteed resource availability for 12, 24, and 36 months. Retrieve your serverâ€™s rated usage for a
given period and enable or disable auto-renewals.<br>
<br>
<span class='pnap-api-knowledge-base-link'>
Knowledge base articles to help you can be found
<a href='https://phoenixnap.com/kb/phoenixnap-bare-metal-cloud-billing-models' target='_blank'>here</a>
</span><br>
<br>
<b>All URLs are relative to (https://api.phoenixnap.com/billing/v1/)</b>


This SDK is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: 0.1
For more information, please visit [https://phoenixnap.com/](https://phoenixnap.com/)

## Installation

### Build a gem

To build the Ruby code into a gem:

```shell
gem build pnap_billing_api.gemspec
```

Then either install the gem locally, replacing `<VERSION>` with the actual version:

```shell
gem install ./pnap_billing_api-<VERSION>.gem
```

(for development, run `gem install --dev ./pnap_billing_api-<VERSION>.gem` to install the development dependencies)

or publish the gem to a gem hosting service, e.g. [RubyGems](https://rubygems.org/).

Finally add this to the Gemfile:

    gem 'pnap_billing_api', '~> <VERSION>'

### Install from Git

To install this Gem from this repository, you'll need to get Bundler by doing `gem install bundler`. Add the following line in your Gemfile:

    gem 'pnap_billing_api', git: 'https://github.com/phoenixnap/ruby-sdk-bmc-poc', glob: 'BillingAPI/*.gemspec'

If you'd like the development version:

    gem 'pnap_billing_api', git: 'https://github.com/phoenixnap/ruby-sdk-bmc-poc', glob: 'BillingAPI/*.gemspec', branch: 'develop'

Then run `bundle install`.

### Include the Ruby code directly

Include the Ruby code directly using `-I` as follows:

```shell
ruby -Ilib script.rb
```

## Getting Started

Please follow the [installation](#installation) procedure and then run the following code:

```ruby
# Load the gem
require 'pnap_billing_api'

# Setup authorization
BillingAPI.configure do |config|
  # Configure OAuth2 access token for authorization: OAuth2
  config.access_token = 'YOUR ACCESS TOKEN'
  # Configure a proc to get access tokens in lieu of the static access_token configuration
  config.access_token_getter = -> { 'YOUR TOKEN GETTER PROC' } 
end

api_instance = BillingAPI::BillingConfigurationsApi.new

begin
  #Retrieves billing configuration associated with the authenticated account.
  result = api_instance.account_billing_configuration_me_get
  p result
rescue BillingAPI::ApiError => e
  puts "Exception when calling BillingConfigurationsApi->account_billing_configuration_me_get: #{e}"
end

```

Authorization can also be setup by using the [`oauth`](https://github.com/oauth-xx/oauth2) library:

```ruby
# Load the gem
require 'pnap_billing_api'
require 'oauth2'

# Setup variables for getting a token.
client_id = 'YOUR_CLIENT_ID'
client_secret = 'YOUR_CLIENT_SECRET'
auth_url = 'https://auth.phoenixnap.com/auth/realms/BMC/protocol/openid-connect/token'


# Setup authorization
BillingAPI.configure do |config|
  # Retrieve the token using OAuth2.
  client = OAuth2::Client.new(client_id, client_secret, token_url: auth_url)
  token = client.client_credentials.get_token

  # Configure OAuth2 access token for authorization: OAuth2
  config.access_token = token.token
end

```

## Documentation for API Endpoints

All URIs are relative to *https://api.phoenixnap.com/billing/v1*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*BillingAPI::BillingConfigurationsApi* | [**account_billing_configuration_me_get**](docs/BillingConfigurationsApi.md#account_billing_configuration_me_get) | **GET** /account-billing-configurations/me | Retrieves billing configuration associated with the authenticated account.
*BillingAPI::ProductsApi* | [**product_availability_get**](docs/ProductsApi.md#product_availability_get) | **GET** /product-availability | List all Product availabilities.
*BillingAPI::ProductsApi* | [**products_get**](docs/ProductsApi.md#products_get) | **GET** /products | List all Products.
*BillingAPI::RatedUsageApi* | [**rated_usage_get**](docs/RatedUsageApi.md#rated_usage_get) | **GET** /rated-usage | List the rated usage.
*BillingAPI::RatedUsageApi* | [**rated_usage_month_to_date_get**](docs/RatedUsageApi.md#rated_usage_month_to_date_get) | **GET** /rated-usage/month-to-date | List the rated usage records for the current calendar month.
*BillingAPI::ReservationsApi* | [**reservations_get**](docs/ReservationsApi.md#reservations_get) | **GET** /reservations | List all Reservations.
*BillingAPI::ReservationsApi* | [**reservations_post**](docs/ReservationsApi.md#reservations_post) | **POST** /reservations | Create a reservation.
*BillingAPI::ReservationsApi* | [**reservations_reservation_id_actions_auto_renew_disable_post**](docs/ReservationsApi.md#reservations_reservation_id_actions_auto_renew_disable_post) | **POST** /reservations/{reservationId}/actions/auto-renew/disable | Disable auto-renewal for reservation by id.
*BillingAPI::ReservationsApi* | [**reservations_reservation_id_actions_auto_renew_enable_post**](docs/ReservationsApi.md#reservations_reservation_id_actions_auto_renew_enable_post) | **POST** /reservations/{reservationId}/actions/auto-renew/enable | Enable auto-renewal for unexpired reservation by reservation id.
*BillingAPI::ReservationsApi* | [**reservations_reservation_id_actions_convert_post**](docs/ReservationsApi.md#reservations_reservation_id_actions_convert_post) | **POST** /reservations/{reservationId}/actions/convert | Convert reservation pricing model by reservation ID.
*BillingAPI::ReservationsApi* | [**reservations_reservation_id_get**](docs/ReservationsApi.md#reservations_reservation_id_get) | **GET** /reservations/{reservationId} | Get a reservation.


## Documentation for Models

 - [BillingAPI::ApplicableDiscounts](docs/ApplicableDiscounts.md)
 - [BillingAPI::BandwidthDetails](docs/BandwidthDetails.md)
 - [BillingAPI::BandwidthRecord](docs/BandwidthRecord.md)
 - [BillingAPI::ConfigurationDetails](docs/ConfigurationDetails.md)
 - [BillingAPI::DiscountDetails](docs/DiscountDetails.md)
 - [BillingAPI::Error](docs/Error.md)
 - [BillingAPI::LocationAvailabilityDetail](docs/LocationAvailabilityDetail.md)
 - [BillingAPI::LocationEnum](docs/LocationEnum.md)
 - [BillingAPI::OperatingSystemDetails](docs/OperatingSystemDetails.md)
 - [BillingAPI::OperatingSystemRecord](docs/OperatingSystemRecord.md)
 - [BillingAPI::PriceUnitEnum](docs/PriceUnitEnum.md)
 - [BillingAPI::PricingPlan](docs/PricingPlan.md)
 - [BillingAPI::Product](docs/Product.md)
 - [BillingAPI::ProductAvailability](docs/ProductAvailability.md)
 - [BillingAPI::ProductCategoryEnum](docs/ProductCategoryEnum.md)
 - [BillingAPI::ProductsGet200ResponseInner](docs/ProductsGet200ResponseInner.md)
 - [BillingAPI::PublicSubnetDetails](docs/PublicSubnetDetails.md)
 - [BillingAPI::PublicSubnetRecord](docs/PublicSubnetRecord.md)
 - [BillingAPI::RatedUsageGet200ResponseInner](docs/RatedUsageGet200ResponseInner.md)
 - [BillingAPI::RatedUsageRecord](docs/RatedUsageRecord.md)
 - [BillingAPI::Reservation](docs/Reservation.md)
 - [BillingAPI::ReservationAutoRenewDisableRequest](docs/ReservationAutoRenewDisableRequest.md)
 - [BillingAPI::ReservationInvoicingModelEnum](docs/ReservationInvoicingModelEnum.md)
 - [BillingAPI::ReservationModelEnum](docs/ReservationModelEnum.md)
 - [BillingAPI::ReservationRequest](docs/ReservationRequest.md)
 - [BillingAPI::ServerDetails](docs/ServerDetails.md)
 - [BillingAPI::ServerProduct](docs/ServerProduct.md)
 - [BillingAPI::ServerProductMetadata](docs/ServerProductMetadata.md)
 - [BillingAPI::ServerRecord](docs/ServerRecord.md)
 - [BillingAPI::StorageDetails](docs/StorageDetails.md)
 - [BillingAPI::StorageRecord](docs/StorageRecord.md)
 - [BillingAPI::ThresholdConfigurationDetails](docs/ThresholdConfigurationDetails.md)


## Documentation for Authorization


Authentication schemes defined for the API:
### OAuth2


- **Type**: OAuth
- **Flow**: application
- **Authorization URL**: 
- **Scopes**: 
  - bmc: Grants full access to bmc-api.
  - bmc.read: Grants read only access to bmc-api.

